var editPanel = $("#edit_panel");
editPanel.html("");
<% case @content_type %>
<% when 'text' %>
  editPanel.html("<%= j(render 'text_edit_panel') %>");
<% when 'paragraph' %>
  editPanel.html("<%= j(render 'paragraph_edit_panel') %>");
  var quill = initQuillEditor('#editor-container');
  quill.root.innerHTML = "<%= j(raw(@element["text"] || 'Texte Ã  modifier')) %>";
  quill.on('text-change', function() {
    $("#element_text").val(quill.root.innerHTML);
  });
  var wrapper = $("[data-sb-id='<%= @section_id %>']").find("[data-id='<%= @element_id %>']");
  editPanel.find(".ql-editor").css({
      "font-family": wrapper.css("font-family"),
      "font-size": wrapper.css("font-size"),
      "color": wrapper.css("color"),
      "text-align": wrapper.css("text-align")
  });
<% when 'media' %>
  editPanel.html("<%= j(render 'media_edit_panel') %>");
  var images = editPanel.find(".sibu_image img");
  images.click(function() {
    if(!$(this).hasClass('selected')) {
      images.removeClass('selected');
      $(this).addClass('selected');
      $("#element_src").val($(this).attr("src"));
    }
  });
<% when 'link' %>
  editPanel.html("<%= j(render 'link_edit_panel') %>");
  $("input[name='mode']").change(function() {
    var selected = $(this).val();
    var other = selected === 'internal' ? 'external' : 'internal';
    $("#link_" + selected).find("#element_value, #element_target").removeAttr("disabled");
    $("#link_" + other).find("#element_value, #element_target").attr("disabled", "disabled");
  });
<% else %>
  editPanel.html("<%= j(render 'error_panel') %>");
<% end %>

<% if @repeat %>
$("#element_actions").show();
<% else %>
$("#element_actions").hide();
<% end %>
editPanel.slideDown("fast");
